<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music - FocusFlow</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .music-container {
      max-width:1200px;
      margin:0 auto;
      padding:20px;
    }
    .playlist-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
      gap:20px;
      margin-top:20px;
    }
    .playlist-card {
      background:#fff;
      border-radius:12px;
      overflow:hidden;
      box-shadow:0 4px 12px rgba(0,0,0,0.08);
      cursor:pointer;
      transition:transform 0.2s, box-shadow 0.2s;
    }
    .playlist-card:hover {
      transform:translateY(-4px);
      box-shadow:0 8px 20px rgba(0,0,0,0.12);
    }
    .playlist-thumb {
      width:100%;
      height:160px;
      background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:48px;
    }
    .playlist-info {
      padding:16px;
    }
    .playlist-title {
      font-size:16px;
      font-weight:600;
      margin:0 0 8px 0;
    }
    .playlist-desc {
      font-size:13px;
      color:#666;
      margin:0;
    }
    .player-section {
      background:#fff;
      border-radius:12px;
      padding:20px;
      box-shadow:0 4px 12px rgba(0,0,0,0.08);
      margin-bottom:30px;
    }
    .player-section h2 {
      margin-top:0;
    }
    .youtube-player {
      width:100%;
      aspect-ratio:16/9;
      border-radius:8px;
      overflow:hidden;
      margin-top:12px;
    }
    .controls {
      display:flex;
      gap:10px;
      margin-top:16px;
    }
    .btn {
      padding:10px 16px;
      background:#6ECF9A;
      color:#fff;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-size:14px;
      transition:background 0.2s;
    }
    .btn:hover {
      background:#5ab880;
    }
    .btn-secondary {
      background:#ddd;
      color:#333;
    }
    .btn-secondary:hover {
      background:#ccc;
    }
  </style>
</head>
<body>

  <!-- üå∏ Navbar -->
  <nav class="navbar">
    <div class="nav-left">
      <img src="{{ url_for('static', filename='bunny.png') }}" alt="Logo" class="nav-logo">
      <span class="nav-title">FocusFlow</span>
    </div>
    <div class="nav-right">
      <a href="{{ url_for('home') }}" class="nav-link">Home</a>
      <a href="{{ url_for('pomo') }}" class="nav-link">Pomo</a>
      <a href="{{ url_for('bunnies_page') }}" class="nav-link">Bunny Streak</a>
      <a href="{{ url_for('music') }}" class="nav-link active">Music</a>
      <a href="#" class="nav-link">Settings</a>
    </div>
  </nav>

  <div class="music-container">
    <h1>üéµ Focus Music</h1>
    <p>Choose a playlist to help you stay focused and motivated</p>

    <!-- Now Playing Section -->
    <div class="player-section">
      <h2>Now Playing</h2>
      <div id="playerContainer">
        <div style="text-align:center;padding:40px;color:#999;">Select a playlist to start playing</div>
      </div>
      <div class="controls">
        <button class="btn" onclick="togglePlayback()">‚ñ∂ Play / Pause</button>
        <button class="btn btn-secondary" onclick="stopPlayback()">‚èπ Stop</button>
      </div>
    </div>

    <!-- Playlist Grid -->
    <h2>Available Playlists</h2>
    <div class="playlist-grid">
      <!-- Classical Music (HALIDONMUSIC) -->
      <div class="playlist-card" onclick="loadPlaylist('mdJU5ogrPMY', 'üéπ Classical Music for Studying', 'HALIDONMUSIC ‚Äî Classical pieces for focus')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">üéπ</div>
        <div class="playlist-info">
          <p class="playlist-title">Classical Music for Studying</p>
          <p class="playlist-desc">HALIDONMUSIC ‚Äî Classical pieces for focus</p>
        </div>
      </div>

      <!-- Lo-Fi Hip Hop -->
      <div class="playlist-card" onclick="loadPlaylist('T9pQjiZPJi0', 'üéß Lo-Fi Hip Hop', 'Slow life sound ‚Äî Unlock Hyper Focus with this Studycore playlist')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üéß</div>
        <div class="playlist-info">
          <p class="playlist-title">Lo-Fi Hip Hop</p>
          <p class="playlist-desc">Slow life sound ‚Äî Studycore playlist</p>
        </div>
      </div>

      <!-- Cozy Cafe / Rainy Street Jazz -->
      <div class="playlist-card" onclick="loadPlaylist('pjX9O7AhogM', '‚òï Cozy Cafe Ambience', 'Rainy Street Jazz Ambience ‚Äî Smooth piano jazz for study')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">‚òï</div>
        <div class="playlist-info">
          <p class="playlist-title">Cozy Cafe Ambience</p>
          <p class="playlist-desc">Rainy street jazz ambience ‚Äî smooth piano</p>
        </div>
      </div>

      <!-- Study Playlist (soft) -->
      <div class="playlist-card" onclick="loadPlaylist('wZVpusDUXbk', 'üìö Let\'s Focus Softly', 'Slow life sound ‚Äî soft study playlist')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #fa709a 0%, #fee140 100%);">üìö</div>
        <div class="playlist-info">
          <p class="playlist-title">Let's Focus Softly</p>
          <p class="playlist-desc">Slow life sound ‚Äî gentle study beats</p>
        </div>
      </div>

      <!-- Rain noises / Heavy Rain -->
      <div class="playlist-card" onclick="loadPlaylist('mPZkdNFkNps', 'üåßÔ∏è Rain Sound on Window', 'Relaxing ambience ASMR ‚Äî heavy rain with thunder')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #30cfd0 0%, #330867 100%);">üåßÔ∏è</div>
        <div class="playlist-info">
          <p class="playlist-title">Rain Sound on Window</p>
          <p class="playlist-desc">Relaxing ambience ASMR ‚Äî heavy rain & thunder</p>
        </div>
      </div>

      <!-- Synthwave / Lofi Girl -->
      <div class="playlist-card" onclick="loadPlaylist('TlWYgGyNnJo', 'üåå 1 A.M Chill Session', 'Lofi Girl ‚Äî synthwave chill session')">
        <div class="playlist-thumb" style="background:linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">üåå</div>
        <div class="playlist-info">
          <p class="playlist-title">1 A.M Chill Session</p>
          <p class="playlist-desc">Lofi Girl ‚Äî synthwave / chill</p>
        </div>
      </div>
    </div>

  </div>

  <script>
    let currentPlayer = null;

    function loadPlaylist(contentId, title, description, isPlaylist = false) {
      const playerContainer = document.getElementById('playerContainer');
      
      // Create YouTube embed for playlist or single video
      let embedUrl;
      if (isPlaylist) {
        embedUrl = `https://www.youtube.com/embed/videoseries?list=${contentId}&controls=1`;
      } else {
        embedUrl = `https://www.youtube.com/embed/${contentId}?controls=1`;
      }
      
      playerContainer.innerHTML = `
        <div class="youtube-player">
          <iframe 
            width="100%" 
            height="100%" 
            src="${embedUrl}" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>
        <div style="margin-top:12px;">
          <h3 style="margin:8px 0;">${title}</h3>
          <p style="color:#666;margin:0;">${description}</p>
        </div>
      `;
      
      currentPlayer = embedUrl;
    }

    function togglePlayback() {
      if (!currentPlayer) {
        alert('Please select a playlist or video first');
        return;
      }
      // YouTube iframe autoplay is controlled by the user, we can't directly pause/play
      alert('Use the YouTube player controls to pause/play');
    }

    function stopPlayback() {
      if (!currentPlayer) {
        alert('No video is currently playing');
        return;
      }
      document.getElementById('playerContainer').innerHTML = `
        <div style="text-align:center;padding:40px;color:#999;">Playback stopped. Select a playlist or video to resume.</div>
      `;
      currentPlayer = null;
    }
  </script>

</body>
</html>
